<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Central de Exegese - EDB</title>
    <style>
        :root {
            --bg-body: #0f0f0f;
            --bg-card: #1a1a1a;
            --bg-sidebar: #141414;
            --text-main: #e0e0e0;
            --accent: #3498db;
            --border: #333;
            --success: #27ae60;
        }

        body { font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; height: 100vh; background: var(--bg-body); color: var(--text-main); overflow: hidden; }

        /* Barra de Navega√ß√£o Lateral */
        .sidebar { width: 350px; background: var(--bg-sidebar); border-right: 1px solid var(--border); display: flex; flex-direction: column; }
        .sidebar-content { flex: 1; overflow-y: auto; padding: 20px; }
        
        /* Busca Global */
        .search-container { padding: 20px; border-bottom: 1px solid var(--border); }
        .search-box { width: 100%; padding: 10px; background: #222; border: 1px solid var(--border); border-radius: 8px; color: #fff; outline: none; }

        /* Estilos de Conte√∫do Te√≥rico */
        .topic { margin-bottom: 20px; font-size: 0.85em; background: #1e1e1e; padding: 12px; border-radius: 8px; border: 1px solid #333; }
        .hidden { display: none; }
        .badge { display: inline-block; padding: 2px 6px; border-radius: 4px; font-size: 0.7em; font-weight: bold; text-transform: uppercase; margin-bottom: 5px; background: var(--accent); color: white; }

        /* √Årea Principal */
        .main-content { flex: 1; overflow-y: auto; padding: 40px; display: grid; grid-template-columns: 1fr 300px; gap: 30px; }
        .caderno-estudo { max-width: 800px; }
        
        .card { background: var(--bg-card); padding: 25px; border-radius: 12px; margin-bottom: 20px; border-left: 5px solid #444; }
        .p1 { border-left-color: #3498db; }
        .p2 { border-left-color: #f1c40f; }
        .tools { border-left-color: #9b59b6; }
        .p3 { border-left-color: #27ae60; }

        textarea, input { width: 100%; padding: 12px; background: #222; border: 1px solid var(--border); border-radius: 6px; color: #fff; margin-top: 10px; box-sizing: border-box; }
        
        /* Painel de Controle (Checklist e Hist√≥rico) */
        .dashboard { background: var(--bg-card); padding: 20px; border-radius: 12px; height: fit-content; border: 1px solid var(--border); }
        .dashboard h3 { font-size: 1.1em; border-bottom: 1px solid var(--border); padding-bottom: 10px; }
        .checklist-item { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; font-size: 0.9em; }
        .checklist-item input { width: auto; margin: 0; }

        .btn-group { display: flex; flex-direction: column; gap: 10px; margin-top: 20px; }
        button { padding: 12px; border-radius: 8px; border: none; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .btn-download { background: var(--success); color: white; }
        .btn-reset { background: #e74c3c; color: white; }
        .btn-save { background: #444; color: white; }

        #historico-lista { list-style: none; padding: 0; font-size: 0.85em; color: var(--accent); }
        #historico-lista li { padding: 5px 0; border-bottom: 1px solid #333; cursor: pointer; }
    </style>
</head>
<body>

    <div class="sidebar">
        <div class="search-container">
            <input type="text" id="globalSearch" class="search-box" placeholder="üîé Pesquisar na Apostila..." onkeyup="filtrarConteudo()">
        </div>
        <div class="sidebar-content">
            <h2>üìö Orienta√ß√µes EDB</h2>
            <div class="topic searchable">
                <span class="badge">AULA 1</span>
                <h3>Exegese vs Eisegese</h3>
                <p>Exegese: Puxar o sentido para fora. Eisegese: Impor sentido pessoal. Foco sempre na <b>Inten√ß√£o Autoral</b>.</p>
            </div>
            <div class="topic searchable">
                <span class="badge">AULA 2</span>
                <h3>Observa√ß√£o</h3>
                <p>Verbos, repeti√ß√µes, personagens. O que Deus revela de si mesmo? N√£o interprete ainda.</p>
            </div>
            <div class="topic searchable">
                <span class="badge">AULA 3</span>
                <h3>Interpreta√ß√£o</h3>
                <p>Contexto hist√≥rico e cultural. O que significou l√°? O texto n√£o pode significar o que nunca significou.</p>
            </div>
            <div class="topic">
                <span class="badge" style="background: #e67e22;">ARQUIVO PDF</span>
                <h3>Material de Apoio</h3>
                <p>Tenha sempre em m√£os a apostila completa do curso para consultas detalhadas.</p>
                <a href="INTENSIVO_COMO_ESTUDAR_A_BIBLIA.pdf" download style="text-decoration: none;">
                    <button style="background: #e67e22; color: white; margin-top: 5px; cursor: pointer; border-radius: 4px; padding: 10px; width: 100%; font-weight: bold; border: none;">üì• Baixar Apostila Completa</button></a>
</div>
        </div>
    </div>

    <div class="main-content">
        <div class="caderno-estudo">
            <h1>üìì Meu Caderno de Estudo</h1>
            <div class="card">
                <label>Refer√™ncia B√≠blica:</label>
                <input type="text" id="ref" placeholder="Ex: Filipenses 4:13" oninput="salvarAuto()">
            </div>
            <div class="card p1"><h3>1. Observa√ß√£o üîç</h3><textarea id="p1" rows="4" placeholder="O que eu vejo no texto..." oninput="salvarAuto()"></textarea></div>
            <div class="card p2"><h3>2. Interpreta√ß√£o üí°</h3><textarea id="p2" rows="4" placeholder="O que significou para eles..." oninput="salvarAuto()"></textarea></div>
            <div class="card tools"><h3>3. Caixa de Ferramentas üõ†Ô∏è</h3><textarea id="tools" rows="3" placeholder="Grego/Hebraico e Coment√°rios..." oninput="salvarAuto()"></textarea></div>
            <div class="card p3"><h3>4. Aplica√ß√£o üå±</h3><textarea id="p3" rows="4" placeholder="O que significa para mim..." oninput="salvarAuto()"></textarea></div>
        </div>

        <div class="dashboard">
            <h3>‚úÖ Checklist de Hoje</h3>
            <div class="checklist-item"><input type="checkbox"> Orar antes de come√ßar</div>
            <div class="checklist-item"><input type="checkbox"> Ler o cap√≠tulo inteiro</div>
            <div class="checklist-item"><input type="checkbox"> Fazer Observa√ß√£o</div>
            <div class="checklist-item"><input type="checkbox"> Buscar Inten√ß√£o Autoral</div>
            <div class="checklist-item"><input type="checkbox"> Validar com Ferramentas</div>
            <div class="checklist-item"><input type="checkbox"> Definir Pr√°tica Pessoal</div>

            <h3>üìÖ Estudos Recentes</h3>
            <ul id="historico-lista">
                </ul>

            <div class="btn-group">
                <button class="btn-save" onclick="salvarNoHistorico()">üíæ Salvar no Hist√≥rico</button>
                <button class="btn-download" onclick="baixarEstudo()">üì• Baixar .TXT</button>
                <button class="btn-reset" onclick="limparTudo()">üóëÔ∏è Novo Estudo</button>
            </div>
        </div>
    </div>

    <script>
        // Pesquisa na apostila
        function filtrarConteudo() {
            const input = document.getElementById('globalSearch').value.toLowerCase();
            const topicos = document.getElementsByClassName('searchable');
            for (let t of topicos) {
                t.style.display = t.innerText.toLowerCase().includes(input) ? "block" : "none";
            }
        }

        // Salvar automaticamente o rascunho atual
        function salvarAuto() {
            const dados = { ref: document.getElementById('ref').value, p1: document.getElementById('p1').value, p2: document.getElementById('p2').value, tools: document.getElementById('tools').value, p3: document.getElementById('p3').value };
            localStorage.setItem('rascunho_edb', JSON.stringify(dados));
        }

        // Salvar na lista de hist√≥rico
        function salvarNoHistorico() {
            const ref = document.getElementById('ref').value || "Sem nome";
            let historico = JSON.parse(localStorage.getItem('historico_edb') || "[]");
            historico.push({ ref: ref, data: new Date().toLocaleDateString() });
            localStorage.setItem('historico_edb', JSON.stringify(historico));
            carregarHistorico();
            alert("Estudo registrado no hist√≥rico!");
        }

        function carregarHistorico() {
            const lista = document.getElementById('historico-lista');
            const historico = JSON.parse(localStorage.getItem('historico_edb') || "[]");
            lista.innerHTML = historico.map(h => `<li>${h.data} - ${h.ref}</li>`).join('');
        }

        function limparTudo() {
            if(confirm("Deseja limpar o caderno atual?")) {
                document.getElementById('ref').value = "";
                document.querySelectorAll('textarea').forEach(t => t.value = "");
                localStorage.removeItem('rascunho_edb');
            }
        }

        function baixarEstudo() {
            const ref = document.getElementById('ref').value || 'estudo';
            const texto = `ESTUDO B√çBLICO EDB\nRef: ${ref}\n\n1. OBSERVA√á√ÉO:\n${document.getElementById('p1').value}\n\n2. INTERPRETA√á√ÉO:\n${document.getElementById('p2').value}\n\n3. FERRAMENTAS:\n${document.getElementById('tools').value}\n\n4. APLICA√á√ÉO:\n${document.getElementById('p3').value}`;
            const blob = new Blob([texto], { type: "text/plain" });
            const a = document.createElement("a");
            a.href = URL.createObjectURL(blob);
            a.download = `${ref}.txt`;
            a.click();
        }

        window.onload = () => {
            carregarHistorico();
            const salvo = JSON.parse(localStorage.getItem('rascunho_edb'));
            if(salvo) {
                document.getElementById('ref').value = salvo.ref;
                document.getElementById('p1').value = salvo.p1;
                document.getElementById('p2').value = salvo.p2;
                document.getElementById('tools').value = salvo.tools;
                document.getElementById('p3').value = salvo.p3;
            }
        };
    </script>
</body>
</html>